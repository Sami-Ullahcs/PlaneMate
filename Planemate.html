<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow - Personal Task Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border: #dee2e6;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 0 0 15px 15px;
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 28px;
        }

        .logo h1 {
            font-size: 28px;
            font-weight: 700;
        }

        .stats {
            display: flex;
            gap: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-box h3 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .stat-box p {
            font-size: 14px;
        }

        .main-nav {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .nav-tabs {
            display: flex;
            list-style: none;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .nav-tab:hover {
            background-color: #f0f4ff;
            color: var(--primary);
        }

        .nav-tab.active {
            background-color: #e6eeff;
            color: var(--primary);
        }

        .page {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            min-height: 500px;
        }

        .page.active {
            display: block;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .page-header h2 {
            color: var(--primary);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--gray);
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .task-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: none;
        }

        .task-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--gray);
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .task-list {
            display: grid;
            gap: 15px;
        }

        .task-item {
            background: white;
            border-left: 5px solid var(--primary);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .task-item.urgent {
            border-left-color: var(--warning);
        }

        .task-item.completed {
            border-left-color: var(--success);
            opacity: 0.7;
        }

        .task-info h3 {
            margin-bottom: 5px;
            font-size: 18px;
        }

        .task-info p {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--gray);
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: var(--gray);
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn:hover {
            background: #f0f4ff;
            color: var(--primary);
        }

        .delete-btn:hover {
            background: #ffe6e6;
            color: var(--warning);
        }

        .priority {
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .priority.high {
            background: #ffe6e6;
            color: var(--warning);
        }

        .priority.medium {
            background: #fff4e6;
            color: #f77f00;
        }

        .priority.low {
            background: #e6f7ff;
            color: var(--success);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 50px;
            margin-bottom: 15px;
            color: #dbe4ff;
        }

        .empty-state h3 {
            margin-bottom: 10px;
        }

        .filter-sort {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .filter-select, .sort-select {
            padding: 8px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: white;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .calendar-header {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .calendar-day {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            min-height: 100px;
            position: relative;
        }

        .calendar-day.other-month {
            opacity: 0.4;
        }

        .calendar-day.has-tasks::after {
            content: '';
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
        }

        .calendar-day-number {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .calendar-tasks {
            font-size: 12px;
            max-height: 70px;
            overflow-y: auto;
        }

        .calendar-task {
            background: #e6eeff;
            padding: 2px 5px;
            border-radius: 3px;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .calendar-task.urgent {
            background: #ffe6e6;
        }

        .calendar-task.completed {
            background: #e6f7ff;
            text-decoration: line-through;
        }

        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-nav h3 {
            color: var(--primary);
        }

        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--success);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-card i {
            font-size: 30px;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .stat-card h3 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .category-stats {
            margin-top: 30px;
        }

        .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .category-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .settings-option {
            margin-bottom: 25px;
        }

        .settings-option h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .stats {
                width: 100%;
                justify-content: space-around;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .calendar {
                grid-template-columns: repeat(1, 1fr);
            }
            
            .calendar-header {
                display: none;
            }
            
            .calendar-day {
                min-height: auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tasks"></i>
                    <h1>TaskFlow</h1>
                </div>
                <div class="stats">
                    <div class="stat-box">
                        <h3 id="total-tasks">0</h3>
                        <p>Total Tasks</p>
                    </div>
                    <div class="stat-box">
                        <h3 id="completed-tasks">0</h3>
                        <p>Completed</p>
                    </div>
                    <div class="stat-box">
                        <h3 id="pending-tasks">0</h3>
                        <p>Pending</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <nav class="main-nav">
            <ul class="nav-tabs">
                <li class="nav-tab active" data-page="dashboard">
                    <i class="fas fa-home"></i> Dashboard
                </li>
                <li class="nav-tab" data-page="tasks">
                    <i class="fas fa-list"></i> All Tasks
                </li>
                <li class="nav-tab" data-page="calendar">
                    <i class="fas fa-calendar-alt"></i> Calendar
                </li>
                <li class="nav-tab" data-page="analytics">
                    <i class="fas fa-chart-bar"></i> Analytics
                </li>
                <li class="nav-tab" data-page="settings">
                    <i class="fas fa-cog"></i> Settings
                </li>
            </ul>
        </nav>

        <!-- Dashboard Page -->
        <div class="page active" id="dashboard">
            <div class="page-header">
                <h2>Dashboard</h2>
                <button class="btn" id="add-task-btn-dashboard">
                    <i class="fas fa-plus"></i> Add New Task
                </button>
            </div>

            <div class="task-form" id="task-form-dashboard">
                <div class="form-group">
                    <label for="task-title-dashboard">Task Title</label>
                    <input type="text" id="task-title-dashboard" class="form-control" placeholder="What needs to be done?">
                </div>
                <div class="form-group">
                    <label for="task-description-dashboard">Description</label>
                    <textarea id="task-description-dashboard" class="form-control" rows="3" placeholder="Add details about your task..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-deadline-dashboard">Deadline</label>
                        <input type="date" id="task-deadline-dashboard" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="task-priority-dashboard">Priority</label>
                        <select id="task-priority-dashboard" class="form-control">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="task-category-dashboard">Category</label>
                    <select id="task-category-dashboard" class="form-control">
                        <option value="work">Work</option>
                        <option value="personal">Personal</option>
                        <option value="shopping">Shopping</option>
                        <option value="health">Health</option>
                        <option value="education">Education</option>
                    </select>
                </div>
                <button class="btn" id="save-task-btn-dashboard">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-tasks"></i>
                    <h3 id="dashboard-total">0</h3>
                    <p>Total Tasks</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="dashboard-completed">0</h3>
                    <p>Completed</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-clock"></i>
                    <h3 id="dashboard-pending">0</h3>
                    <p>Pending</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3 id="dashboard-urgent">0</h3>
                    <p>Urgent</p>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="completion-progress" style="width: 0%"></div>
            </div>

            <h3>Recent Tasks</h3>
            <div class="task-list" id="dashboard-task-list">
                <div class="empty-state" id="dashboard-empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>No tasks yet</h3>
                    <p>Add your first task to get started!</p>
                </div>
            </div>
        </div>

        <!-- All Tasks Page -->
        <div class="page" id="tasks">
            <div class="page-header">
                <h2>All Tasks</h2>
                <button class="btn" id="add-task-btn-tasks">
                    <i class="fas fa-plus"></i> Add New Task
                </button>
            </div>

            <div class="task-form" id="task-form-tasks">
                <div class="form-group">
                    <label for="task-title-tasks">Task Title</label>
                    <input type="text" id="task-title-tasks" class="form-control" placeholder="What needs to be done?">
                </div>
                <div class="form-group">
                    <label for="task-description-tasks">Description</label>
                    <textarea id="task-description-tasks" class="form-control" rows="3" placeholder="Add details about your task..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-deadline-tasks">Deadline</label>
                        <input type="date" id="task-deadline-tasks" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="task-priority-tasks">Priority</label>
                        <select id="task-priority-tasks" class="form-control">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="task-category-tasks">Category</label>
                    <select id="task-category-tasks" class="form-control">
                        <option value="work">Work</option>
                        <option value="personal">Personal</option>
                        <option value="shopping">Shopping</option>
                        <option value="health">Health</option>
                        <option value="education">Education</option>
                    </select>
                </div>
                <button class="btn" id="save-task-btn-tasks">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </div>

            <div class="filter-sort">
                <div>
                    <label for="filter-tasks">Filter by: </label>
                    <select id="filter-tasks" class="filter-select">
                        <option value="all">All</option>
                        <option value="completed">Completed</option>
                        <option value="pending">Pending</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
                <div>
                    <label for="sort-tasks">Sort by: </label>
                    <select id="sort-tasks" class="sort-select">
                        <option value="deadline">Deadline</option>
                        <option value="priority">Priority</option>
                        <option value="created">Date Added</option>
                    </select>
                </div>
            </div>

            <div class="task-list" id="tasks-task-list">
                <div class="empty-state" id="tasks-empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>No tasks yet</h3>
                    <p>Add your first task to get started!</p>
                </div>
            </div>
        </div>

        <!-- Calendar Page -->
        <div class="page" id="calendar">
            <div class="page-header">
                <h2>Calendar View</h2>
                <button class="btn" id="add-task-btn-calendar">
                    <i class="fas fa-plus"></i> Add New Task
                </button>
            </div>

            <div class="task-form" id="task-form-calendar">
                <div class="form-group">
                    <label for="task-title-calendar">Task Title</label>
                    <input type="text" id="task-title-calendar" class="form-control" placeholder="What needs to be done?">
                </div>
                <div class="form-group">
                    <label for="task-description-calendar">Description</label>
                    <textarea id="task-description-calendar" class="form-control" rows="3" placeholder="Add details about your task..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-deadline-calendar">Deadline</label>
                        <input type="date" id="task-deadline-calendar" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="task-priority-calendar">Priority</label>
                        <select id="task-priority-calendar" class="form-control">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="task-category-calendar">Category</label>
                    <select id="task-category-calendar" class="form-control">
                        <option value="work">Work</option>
                        <option value="personal">Personal</option>
                        <option value="shopping">Shopping</option>
                        <option value="health">Health</option>
                        <option value="education">Education</option>
                    </select>
                </div>
                <button class="btn" id="save-task-btn-calendar">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </div>

            <div class="calendar-nav">
                <button class="btn btn-secondary" id="prev-month">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <h3 id="current-month">December 2023</h3>
                <button class="btn btn-secondary" id="next-month">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <div class="calendar-header">
                <div>Sun</div>
                <div>Mon</div>
                <div>Tue</div>
                <div>Wed</div>
                <div>Thu</div>
                <div>Fri</div>
                <div>Sat</div>
            </div>
            <div class="calendar" id="calendar-grid">
                <!-- Calendar will be generated by JavaScript -->
            </div>
        </div>

        <!-- Analytics Page -->
        <div class="page" id="analytics">
            <div class="page-header">
                <h2>Task Analytics</h2>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-tasks"></i>
                    <h3 id="analytics-total">0</h3>
                    <p>Total Tasks</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="analytics-completed">0</h3>
                    <p>Completed</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-clock"></i>
                    <h3 id="analytics-pending">0</h3>
                    <p>Pending</p>
                </div>
                <div class="stat-card">
                    <i class="fas fa-percentage"></i>
                    <h3 id="analytics-completion-rate">0%</h3>
                    <p>Completion Rate</p>
                </div>
            </div>

            <div class="category-stats">
                <h3>Tasks by Category</h3>
                <div id="category-stats-list">
                    <!-- Category stats will be generated by JavaScript -->
                </div>
            </div>

            <div class="priority-stats">
                <h3>Tasks by Priority</h3>
                <div id="priority-stats-list">
                    <!-- Priority stats will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settings">
            <div class="page-header">
                <h2>Settings</h2>
            </div>

            <div class="settings-option">
                <h3>Appearance</h3>
                <div class="form-group">
                    <label for="theme-select">Theme</label>
                    <select id="theme-select" class="form-control">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="auto">Auto (System)</option>
                    </select>
                </div>
            </div>

            <div class="settings-option">
                <h3>Notifications</h3>
                <div class="form-group">
                    <label class="toggle-label">
                        <span>Task reminders</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="reminders-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                </div>
                <div class="form-group">
                    <label class="toggle-label">
                        <span>Due date notifications</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="due-date-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                </div>
            </div>

            <div class="settings-option">
                <h3>Data Management</h3>
                <button class="btn btn-secondary" id="export-data">
                    <i class="fas fa-download"></i> Export Data
                </button>
                <button class="btn btn-secondary" id="import-data" style="margin-left: 10px;">
                    <i class="fas fa-upload"></i> Import Data
                </button>
                <button class="btn" id="clear-data" style="margin-left: 10px; background: var(--warning);">
                    <i class="fas fa-trash"></i> Clear All Data
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample tasks data
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [
            {
                id: 1,
                title: 'Complete project proposal',
                description: 'Finish the project proposal document and send to client',
                deadline: '2023-12-15',
                priority: 'high',
                category: 'work',
                completed: false,
                createdAt: new Date('2023-11-20')
            },
            {
                id: 2,
                title: 'Buy groceries',
                description: 'Milk, eggs, bread, fruits, and vegetables',
                deadline: '2023-12-05',
                priority: 'medium',
                category: 'shopping',
                completed: false,
                createdAt: new Date('2023-11-25')
            },
            {
                id: 3,
                title: 'Gym workout',
                description: 'Cardio and strength training',
                deadline: '2023-12-03',
                priority: 'low',
                category: 'health',
                completed: true,
                createdAt: new Date('2023-11-15')
            }
        ];

        // DOM Elements
        const navTabs = document.querySelectorAll('.nav-tab');
        const pages = document.querySelectorAll('.page');
        
        // Task form elements for each page
        const taskForms = {
            dashboard: document.getElementById('task-form-dashboard'),
            tasks: document.getElementById('task-form-tasks'),
            calendar: document.getElementById('task-form-calendar')
        };
        
        const addTaskBtns = {
            dashboard: document.getElementById('add-task-btn-dashboard'),
            tasks: document.getElementById('add-task-btn-tasks'),
            calendar: document.getElementById('add-task-btn-calendar')
        };
        
        const saveTaskBtns = {
            dashboard: document.getElementById('save-task-btn-dashboard'),
            tasks: document.getElementById('save-task-btn-tasks'),
            calendar: document.getElementById('save-task-btn-calendar')
        };
        
        // Stats elements
        const totalTasksEl = document.getElementById('total-tasks');
        const completedTasksEl = document.getElementById('completed-tasks');
        const pendingTasksEl = document.getElementById('pending-tasks');
        
        // Calendar elements
        const calendarGrid = document.getElementById('calendar-grid');
        const currentMonthEl = document.getElementById('current-month');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        
        // Current state
        let currentPage = 'dashboard';
        let currentCategory = 'all';
        let currentFilter = 'all';
        let currentSort = 'deadline';
        let editingTaskId = null;
        let currentDate = new Date();
        let currentYear = currentDate.getFullYear();
        let currentMonth = currentDate.getMonth();

        // Initialize the app
        function init() {
            updateStats();
            renderDashboard();
            renderTasksPage();
            renderCalendar();
            renderAnalytics();
            setupEventListeners();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation
            navTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const pageId = tab.dataset.page;
                    switchPage(pageId);
                });
            });
            
            // Add task buttons
            Object.keys(addTaskBtns).forEach(page => {
                addTaskBtns[page].addEventListener('click', () => toggleTaskForm(page));
            });
            
            // Save task buttons
            Object.keys(saveTaskBtns).forEach(page => {
                saveTaskBtns[page].addEventListener('click', () => saveTask(page));
            });
            
            // Calendar navigation
            prevMonthBtn.addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar();
            });
            
            nextMonthBtn.addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar();
            });
            
            // Filter and sort for tasks page
            document.getElementById('filter-tasks').addEventListener('change', (e) => {
                currentFilter = e.target.value;
                renderTasksPage();
            });
            
            document.getElementById('sort-tasks').addEventListener('change', (e) => {
                currentSort = e.target.value;
                renderTasksPage();
            });
            
            // Settings
            document.getElementById('clear-data').addEventListener('click', clearAllData);
            document.getElementById('export-data').addEventListener('click', exportData);
            document.getElementById('import-data').addEventListener('click', importData);
        }

        // Switch between pages
        function switchPage(pageId) {
            // Update active tab
            navTabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.page === pageId);
            });
            
            // Update active page
            pages.forEach(page => {
                page.classList.toggle('active', page.id === pageId);
            });
            
            currentPage = pageId;
            
            // Refresh the page content
            if (pageId === 'dashboard') {
                renderDashboard();
            } else if (pageId === 'tasks') {
                renderTasksPage();
            } else if (pageId === 'calendar') {
                renderCalendar();
            } else if (pageId === 'analytics') {
                renderAnalytics();
            }
        }

        // Toggle task form visibility
        function toggleTaskForm(page) {
            taskForms[page].classList.toggle('active');
            if (!taskForms[page].classList.contains('active')) {
                resetForm(page);
            }
        }

        // Reset the task form
        function resetForm(page) {
            document.getElementById(`task-title-${page}`).value = '';
            document.getElementById(`task-description-${page}`).value = '';
            document.getElementById(`task-deadline-${page}`).value = '';
            document.getElementById(`task-priority-${page}`).value = 'medium';
            document.getElementById(`task-category-${page}`).value = 'work';
            editingTaskId = null;
            saveTaskBtns[page].innerHTML = '<i class="fas fa-save"></i> Save Task';
        }

        // Save a new task or update an existing one
        function saveTask(page) {
            const title = document.getElementById(`task-title-${page}`).value.trim();
            const description = document.getElementById(`task-description-${page}`).value.trim();
            const deadline = document.getElementById(`task-deadline-${page}`).value;
            const priority = document.getElementById(`task-priority-${page}`).value;
            const category = document.getElementById(`task-category-${page}`).value;
            
            if (!title) {
                alert('Please enter a task title');
                return;
            }
            
            if (editingTaskId) {
                // Update existing task
                const taskIndex = tasks.findIndex(task => task.id === editingTaskId);
                if (taskIndex !== -1) {
                    tasks[taskIndex] = {
                        ...tasks[taskIndex],
                        title,
                        description,
                        deadline,
                        priority,
                        category
                    };
                }
            } else {
                // Create new task
                const newTask = {
                    id: Date.now(),
                    title,
                    description,
                    deadline,
                    priority,
                    category,
                    completed: false,
                    createdAt: new Date()
                };
                tasks.unshift(newTask);
            }
            
            // Save to localStorage
            localStorage.setItem('tasks', JSON.stringify(tasks));
            
            // Update UI
            updateStats();
            renderDashboard();
            renderTasksPage();
            renderCalendar();
            renderAnalytics();
            toggleTaskForm(page);
            resetForm(page);
        }

        // Delete a task
        function deleteTask(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                tasks = tasks.filter(task => task.id !== id);
                localStorage.setItem('tasks', JSON.stringify(tasks));
                updateStats();
                renderDashboard();
                renderTasksPage();
                renderCalendar();
                renderAnalytics();
            }
        }

        // Toggle task completion status
        function toggleTaskCompletion(id) {
            const task = tasks.find(task => task.id === id);
            if (task) {
                task.completed = !task.completed;
                localStorage.setItem('tasks', JSON.stringify(tasks));
                updateStats();
                renderDashboard();
                renderTasksPage();
                renderCalendar();
                renderAnalytics();
            }
        }

        // Edit a task
        function editTask(id, page) {
            const task = tasks.find(task => task.id === id);
            if (task) {
                document.getElementById(`task-title-${page}`).value = task.title;
                document.getElementById(`task-description-${page}`).value = task.description;
                document.getElementById(`task-deadline-${page}`).value = task.deadline;
                document.getElementById(`task-priority-${page}`).value = task.priority;
                document.getElementById(`task-category-${page}`).value = task.category;
                
                editingTaskId = id;
                saveTaskBtns[page].innerHTML = '<i class="fas fa-save"></i> Update Task';
                
                if (!taskForms[page].classList.contains('active')) {
                    toggleTaskForm(page);
                }
            }
        }

        // Update statistics
        function updateStats() {
            const total = tasks.length;
            const completed = tasks.filter(task => task.completed).length;
            const pending = total - completed;
            const urgent = tasks.filter(task => isUrgent(task.deadline) && !task.completed).length;
            
            totalTasksEl.textContent = total;
            completedTasksEl.textContent = completed;
            pendingTasksEl.textContent = pending;
            
            // Update dashboard stats
            document.getElementById('dashboard-total').textContent = total;
            document.getElementById('dashboard-completed').textContent = completed;
            document.getElementById('dashboard-pending').textContent = pending;
            document.getElementById('dashboard-urgent').textContent = urgent;
            
            // Update completion progress bar
            const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.getElementById('completion-progress').style.width = `${completionRate}%`;
        }

        // Format date for display
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Check if a task is urgent (due within 3 days)
        function isUrgent(deadline) {
            const today = new Date();
            const dueDate = new Date(deadline);
            const diffTime = dueDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays <= 3 && diffDays >= 0;
        }

        // Render dashboard
        function renderDashboard() {
            const taskList = document.getElementById('dashboard-task-list');
            const emptyState = document.getElementById('dashboard-empty-state');
            
            // Clear task list
            taskList.innerHTML = '';
            
            // Get recent tasks (last 5)
            const recentTasks = tasks.slice(0, 5);
            
            // Show empty state if no tasks
            if (recentTasks.length === 0) {
                taskList.appendChild(emptyState);
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            // Render each task
            recentTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = `task-item ${task.completed ? 'completed' : ''} ${isUrgent(task.deadline) ? 'urgent' : ''}`;
                
                taskElement.innerHTML = `
                    <div class="task-info">
                        <h3>${task.title}</h3>
                        <p>${task.description}</p>
                        <div class="task-meta">
                            <span><i class="far fa-calendar"></i> ${formatDate(task.deadline)}</span>
                            <span class="priority ${task.priority}">${task.priority}</span>
                            <span><i class="fas fa-tag"></i> ${task.category}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="action-btn complete-btn" title="${task.completed ? 'Mark as pending' : 'Mark as completed'}">
                            <i class="fas fa-${task.completed ? 'undo' : 'check'}"></i>
                        </button>
                        <button class="action-btn edit-btn" title="Edit task">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" title="Delete task">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                // Add event listeners to action buttons
                const completeBtn = taskElement.querySelector('.complete-btn');
                const editBtn = taskElement.querySelector('.edit-btn');
                const deleteBtn = taskElement.querySelector('.delete-btn');
                
                completeBtn.addEventListener('click', () => toggleTaskCompletion(task.id));
                editBtn.addEventListener('click', () => editTask(task.id, 'dashboard'));
                deleteBtn.addEventListener('click', () => deleteTask(task.id));
                
                taskList.appendChild(taskElement);
            });
        }

        // Render tasks page
        function renderTasksPage() {
            const taskList = document.getElementById('tasks-task-list');
            const emptyState = document.getElementById('tasks-empty-state');
            
            // Filter tasks
            let filteredTasks = tasks.filter(task => {
                // Status filter
                if (currentFilter === 'completed' && !task.completed) {
                    return false;
                }
                if (currentFilter === 'pending' && task.completed) {
                    return false;
                }
                if (currentFilter === 'urgent' && (!isUrgent(task.deadline) || task.completed)) {
                    return false;
                }
                
                return true;
            });
            
            // Sort tasks
            filteredTasks.sort((a, b) => {
                if (currentSort === 'deadline') {
                    return new Date(a.deadline) - new Date(b.deadline);
                } else if (currentSort === 'priority') {
                    const priorityOrder = { high: 3, medium: 2, low: 1 };
                    return priorityOrder[b.priority] - priorityOrder[a.priority];
                } else if (currentSort === 'created') {
                    return new Date(b.createdAt) - new Date(a.createdAt);
                }
                return 0;
            });
            
            // Clear task list
            taskList.innerHTML = '';
            
            // Show empty state if no tasks
            if (filteredTasks.length === 0) {
                taskList.appendChild(emptyState);
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            // Render each task
            filteredTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = `task-item ${task.completed ? 'completed' : ''} ${isUrgent(task.deadline) ? 'urgent' : ''}`;
                
                taskElement.innerHTML = `
                    <div class="task-info">
                        <h3>${task.title}</h3>
                        <p>${task.description}</p>
                        <div class="task-meta">
                            <span><i class="far fa-calendar"></i> ${formatDate(task.deadline)}</span>
                            <span class="priority ${task.priority}">${task.priority}</span>
                            <span><i class="fas fa-tag"></i> ${task.category}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="action-btn complete-btn" title="${task.completed ? 'Mark as pending' : 'Mark as completed'}">
                            <i class="fas fa-${task.completed ? 'undo' : 'check'}"></i>
                        </button>
                        <button class="action-btn edit-btn" title="Edit task">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" title="Delete task">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                // Add event listeners to action buttons
                const completeBtn = taskElement.querySelector('.complete-btn');
                const editBtn = taskElement.querySelector('.edit-btn');
                const deleteBtn = taskElement.querySelector('.delete-btn');
                
                completeBtn.addEventListener('click', () => toggleTaskCompletion(task.id));
                editBtn.addEventListener('click', () => editTask(task.id, 'tasks'));
                deleteBtn.addEventListener('click', () => deleteTask(task.id));
                
                taskList.appendChild(taskElement);
            });
        }

        // Render calendar
        function renderCalendar() {
            // Update current month display
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];
            currentMonthEl.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            // Clear calendar
            calendarGrid.innerHTML = '';
            
            // Get first day of month and number of days
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay(); // 0 = Sunday, 1 = Monday, etc.
            
            // Add days from previous month
            const prevMonthLastDay = new Date(currentYear, currentMonth, 0).getDate();
            for (let i = startingDay - 1; i >= 0; i--) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.innerHTML = `
                    <div class="calendar-day-number">${prevMonthLastDay - i}</div>
                `;
                calendarGrid.appendChild(dayElement);
            }
            
            // Add days of current month
            for (let i = 1; i <= daysInMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                // Check if this day has tasks
                const dayTasks = tasks.filter(task => {
                    const taskDate = new Date(task.deadline);
                    return taskDate.getDate() === i && 
                           taskDate.getMonth() === currentMonth && 
                           taskDate.getFullYear() === currentYear;
                });
                
                if (dayTasks.length > 0) {
                    dayElement.classList.add('has-tasks');
                }
                
                dayElement.innerHTML = `
                    <div class="calendar-day-number">${i}</div>
                    <div class="calendar-tasks">
                        ${dayTasks.map(task => `
                            <div class="calendar-task ${task.priority} ${task.completed ? 'completed' : ''}">
                                ${task.title}
                            </div>
                        `).join('')}
                    </div>
                `;
                
                calendarGrid.appendChild(dayElement);
            }
            
            // Add days from next month to fill the grid
            const totalCells = 42; // 6 rows x 7 days
            const remainingCells = totalCells - (startingDay + daysInMonth);
            for (let i = 1; i <= remainingCells; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.innerHTML = `
                    <div class="calendar-day-number">${i}</div>
                `;
                calendarGrid.appendChild(dayElement);
            }
        }

        // Render analytics page
        function renderAnalytics() {
            // Update analytics stats
            const total = tasks.length;
            const completed = tasks.filter(task => task.completed).length;
            const pending = total - completed;
            const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            document.getElementById('analytics-total').textContent = total;
            document.getElementById('analytics-completed').textContent = completed;
            document.getElementById('analytics-pending').textContent = pending;
            document.getElementById('analytics-completion-rate').textContent = `${completionRate}%`;
            
            // Category stats
            const categoryStats = {};
            tasks.forEach(task => {
                if (!categoryStats[task.category]) {
                    categoryStats[task.category] = { total: 0, completed: 0 };
                }
                categoryStats[task.category].total++;
                if (task.completed) {
                    categoryStats[task.category].completed++;
                }
            });
            
            const categoryStatsList = document.getElementById('category-stats-list');
            categoryStatsList.innerHTML = '';
            
            for (const category in categoryStats) {
                const stat = categoryStats[category];
                const completionRate = stat.total > 0 ? Math.round((stat.completed / stat.total) * 100) : 0;
                
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category-item';
                categoryElement.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="category-color" style="background: ${getCategoryColor(category)};"></div>
                        <span>${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                    </div>
                    <div>${stat.completed}/${stat.total} (${completionRate}%)</div>
                `;
                
                categoryStatsList.appendChild(categoryElement);
            }
            
            // Priority stats
            const priorityStats = { high: 0, medium: 0, low: 0 };
            tasks.forEach(task => {
                priorityStats[task.priority]++;
            });
            
            const priorityStatsList = document.getElementById('priority-stats-list');
            priorityStatsList.innerHTML = '';
            
            for (const priority in priorityStats) {
                const count = priorityStats[priority];
                const percentage = total > 0 ? Math.round((count / total) * 100) : 0;
                
                const priorityElement = document.createElement('div');
                priorityElement.className = 'category-item';
                priorityElement.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <span class="priority ${priority}">${priority}</span>
                    </div>
                    <div>${count} (${percentage}%)</div>
                `;
                
                priorityStatsList.appendChild(priorityElement);
            }
        }

        // Get color for category
        function getCategoryColor(category) {
            const colors = {
                work: '#4361ee',
                personal: '#4cc9f0',
                shopping: '#f72585',
                health: '#3a0ca3',
                education: '#7209b7'
            };
            return colors[category] || '#6c757d';
        }

        // Clear all data
        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This action cannot be undone.')) {
                tasks = [];
                localStorage.setItem('tasks', JSON.stringify(tasks));
                updateStats();
                renderDashboard();
                renderTasksPage();
                renderCalendar();
                renderAnalytics();
            }
        }

        // Export data
        function exportData() {
            const dataStr = JSON.stringify(tasks, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'taskflow-data.json';
            link.click();
        }

        // Import data
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const importedTasks = JSON.parse(event.target.result);
                        if (Array.isArray(importedTasks)) {
                            tasks = importedTasks;
                            localStorage.setItem('tasks', JSON.stringify(tasks));
                            updateStats();
                            renderDashboard();
                            renderTasksPage();
                            renderCalendar();
                            renderAnalytics();
                            alert('Data imported successfully!');
                        } else {
                            alert('Invalid file format. Please select a valid TaskFlow data file.');
                        }
                    } catch (error) {
                        alert('Error importing data. Please check the file format.');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>